---
import Layout from "@/layouts/Layout.astro";
import DeckHubView from "@/components/decks/DeckHubView";

export const prerender = false;

const deckId = Astro.params.deckId;
const user = Astro.locals.user;

if (!user || !user.id) {
  return Astro.redirect(`/auth/login?redirect=${encodeURIComponent(`/decks/${deckId ?? ""}`)}`);
}

if (!deckId) {
  throw new Error("Deck ID is required");
}

const pageTitle = `Talia ${deckId} | LinguaPairs`;
---

<Layout title={pageTitle}>
  <main class="min-h-screen bg-background">
    <div class="mx-auto w-full max-w-5xl px-4 py-10">
      <DeckHubView initialDeckId={deckId} autoSelectLast={false} client:load />
    </div>
  </main>
</Layout>

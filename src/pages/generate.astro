---
/**
 * Generate Page - Widok kreatora generowania par słówek
 *
 * Wymaga uwierzytelnienia - użytkownik musi być zalogowany.
 * Pozwala na:
 * - Wybór lub utworzenie talii
 * - Wybór źródła generacji (temat lub własny tekst)
 * - Konfigurację parametrów generacji
 * - Weryfikację limitu dziennego (quota)
 */

import Layout from "@/layouts/Layout.astro";
import GenerateWizard from "@/components/generate/GenerateWizard";
import { Toaster } from "@/components/ui/sonner";

// Sprawdzenie uwierzytelnienia
// TODO: Odkomentować po utworzeniu strony /auth/login
//const { data: sessionData } = await Astro.locals.supabase.auth.getSession();
//const user = sessionData?.session?.user ?? null;

// Jeśli użytkownik nie jest zalogowany, przekieruj do logowania
// if (!user) {
//   return Astro.redirect("/auth/login?redirect=/generate");
// }

// Meta info
const title = "Generowanie par słówek | LinguaPairs";
---

<Layout title={title}>
  <main class="min-h-screen bg-background">
    <div class="container mx-auto px-4 py-8">
      <div class="max-w-4xl mx-auto">
        <header class="mb-8 text-center">
          <h1 class="text-3xl font-bold text-foreground mb-2">Generowanie par słówek</h1>
          <p class="text-muted-foreground">Wygeneruj 30 nowych par słówek dla swojej talii używając AI</p>
        </header>

        <!-- Generate Wizard - React Component -->
        <GenerateWizard client:load />

        <!-- Toast Notifications -->
        <Toaster client:load />
      </div>
    </div>
  </main>
</Layout>
